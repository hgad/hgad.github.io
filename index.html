<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Haitham Gad's Website</title>
    <meta name="description" content="Haitham Gad's home - a place where you can read about programming, mathematics and computer science!">
    <meta name="viewport" content="width=device-width">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" type="image/png" href="./img/favicon.png">
    <link rel="stylesheet" type="text/css" href="./css/normalize.css">
    <link rel="stylesheet" type="text/css" media="screen and (min-device-width: 1025px)" href="./css/style.css">
    <link rel="stylesheet" type="text/css" media="screen and (max-device-width: 1024px)" href="./css/mobile.css">
    <link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css">

    <script src="./js/vendor/modernizr-2.6.2.min.js"></script>

    <script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a>
        to improve your experience.
      </p>
    <![endif]-->

    <!-- Add your site or application content here -->
    <header>
      <nav>
        <a href="./">
          <img id="lambda" src="./img/lambda.png" width="150" height="100">
        </a>

        <hr>

        <table>
          <tr>
            <td> <a href="./">HOME</a> </td>
          </tr>
          <tr>
            <td> <a href="./blog/1">BLOG</a> </td>
          </tr>
          <!--
          <tr>
            <td> <a href="/projects">PROJECTS</a> </td>
          </tr>
          -->
          <tr>
            <td> <a href="./archive">ARCHIVE</a> </td>
          </tr>
          <tr>
            <td> <a href="./about">ABOUT</a> </td>
          </tr>
        </table>
      </nav>
    </header>

    <!--
    <div class="gcse-searchbar">
      <script>
        (function() {
          var cx = '013374158812828085901:lnaifgecssc';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
              '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
      <gcse:search></gcse:search>
    </div>
    -->

    <article>
      <!--
<header>
  <h1>Welcome</h1>
</header>

<section>
  <p>
  ... to my personal website, a place where I share my
  <a href="/blog/1">thoughts and insights</a> on programming and other topics,
  along with updates on my latest
  <a href="/projects">activities and projects</a>.
  Check out my <a href="/blog/1">recent blog posts</a> or use the navigation
  menu to navigate the website.
  </p>
</section>
-->

<section class="post-list">
  <header class="post-header">
  
    <h2 id="post-link"><a href="./posts/stl-algorithms-in-action/">STL Algorithms in Action</a></h2>
  

  <p class="post-info">
    March 25, 2016
  </p>
</header>

<section class="post-body">
  <p>
  <p>Under tight schedules and looming deadlines, C++ programmers tend to ignore the Standard Library algorithms and settle for rather suboptimal handcrafted solutions that get the job done. I know this, because I myself have done it more than I’d care to admit. The excuse is usually that the problem does not fit any of these neat, but somewhat detached, algorithms.</p>
<p>STL algorithms are actually very handy. They give names to commonly occurring (and often cryptic) raw loops<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. Until recently, however, they required too much work to use effectively. Thankfully, with the introduction of type inference and lambda expressions in C++11, STL algorithms are now a lot easier to use.</p>
<p>In this post, I’ll be demonstrating the versatility of STL algorithms by implementing common sorting algorithms (insertion sort, in-place merge sort and randomized quicksort) using STL algorithms as building blocks<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>. Sorting is the kind of problem that requires moving data around, and when implemented using raw loops, they tend to be unreadable. We’ll see how STL algorithms can describe this code more succinctly and possibly more efficiently.</p>
<h3 id="insertion-sort">Insertion Sort</h3>
<p>This is a C++ adaptation of insertion sort as it appears in CLRS<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">template</span> &lt;<span class="kw">typename</span> I&gt;
<span class="dt">void</span> insertion_sort(I first, I last) {
  <span class="kw">for</span> (<span class="kw">auto</span>&amp;&amp; j = next(first); j != last; ++j) {
    <span class="kw">auto</span> key = *j;
    <span class="kw">auto</span>&amp;&amp; i = prev(j);
    <span class="kw">while</span> (i != prev(first) &amp;&amp; *i &gt; key) {
      *next(i) = *i;
      --i;
    }

    *next(i) = key;
  }
}</code></pre></div>
<p>It’s compact and generic, but aside from the function name, it’s completely unobvious what the nested loops are doing at first sight. Let’s see how to make this more readable.</p>
<p>By examining the inner loop, it looks like it searches backwards in the given range for a value less than or equal to <code>key</code>. It starts from the value just before <code>j</code> down to <code>0</code>. In doing so, it also shifts all the values it scans one position to the right. Once the value is found (or we reach the beginning of the range), the value at <code>j</code> is then inserted.</p>
<p>Let’s pretend for a moment that the range is being scanned in the forward rather than the backward direction. In this case, all we need is a function that searches a range for an element (call it <code>k</code>) that satisfies a certain predicate. When <code>k</code> is found (or we reach the end of the range), the function has to insert the first element of the range before <code>k</code> and shift all elements between them one position to the left:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">template</span> &lt;<span class="kw">typename</span> I, <span class="kw">typename</span> P&gt;
<span class="dt">void</span> insert_first_before(I first, I last, P pred) {
  <span class="kw">auto</span>&amp;&amp; second = next(first);
  rotate(first, second, find_if(second, last, pred));
}</code></pre></div>
<p>If you’re surprised to see <code>rotate()</code> being used here, you’re not alone. Sean Parent’s GoingNative 2013 <a href="https://www.youtube.com/watch?v=qH6sSOr-yk8">talk</a> was an eye-opener for me in this respect. Turns out <code>rotate()</code> is one of the handiest algorithms in the Standard Library. It takes three iterators: <code>first</code>, <code>middle</code> and <code>last</code>. It performs a left-rotate operation such that the elements between <code>middle</code> and <code>last</code> are moved to the beginning of the range, and the elements between <code>first</code> and <code>middle</code> are moved to the end of the range. It also returns an iterator to the beginning of the second range after rotation, which often comes in handy as we will see later<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>. Essentially, every time you find yourself manually shifting elements, there’s almost always a better way to achieve the same effect using <code>rotate()</code><a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>.</p>
<p>Going back to our problem, what we originally needed was an algorithm that scans a range backwards not forwards. But do we really need that? In fact we don’t. The range we’re searching through (from <code>first</code> to <code>j</code>) is guaranteed to be sorted, so theoretically, we don’t even need to do a linear search at all. Binary search would do the trick, which gives us an <em>O(n log n)</em> version of insertion sort. This can be achieved using <code>upper_bound()</code> and <code>reverse_iterator</code>s:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">template</span> &lt;<span class="kw">typename</span> I&gt;
<span class="dt">void</span> insertion_sort(I first, I last) {
  <span class="kw">for</span> (<span class="kw">auto</span>&amp;&amp; iter = next(first); iter != last; ++iter) {
    rotate(
      make_reverse_iterator(next(iter)),
      make_reverse_iterator(iter),
      make_reverse_iterator(upper_bound(first, iter, *iter)));
  }
}</code></pre></div>
<p>Notice that the first <code>reverse_iterator</code> is set to <code>next(iter)</code> not <code>iter</code>. That’s because <code>reverse_iterator</code>s refer to the position right before the one they’re initialized with. The same reasoning applies to the other two <code>reverse_iterator</code>s.</p>
<p>But suppose we wanted to mimic the raw-loop solution instruction-by-instruction. It’s still easy to achieve this. Now that we have <code>insert_first_before()</code>, the reverse linear search can be easily implemented using <code>reverse_iterator</code>s as well:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">template</span> &lt;<span class="kw">typename</span> I, <span class="kw">typename</span> P&gt;
<span class="dt">void</span> insert_last_after(I first, I last, P pred) {
  insert_first_before(
    make_reverse_iterator(last),
    make_reverse_iterator(first), pred);
}</code></pre></div>
<p>You may notice that the function name isn’t ideal. <code>last</code> in the function name refers to the last element in the range, while <code>last</code>, the formal parameter, refers to the element one past the end of the range.</p>
<p>In any case, given <code>insert_last_after()</code>, The <em>O(n<sup>2</sup>)</em> version of <code>insertion_sort()</code> becomes trivial:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">template</span> &lt;<span class="kw">typename</span> I&gt;
<span class="dt">void</span> insertion_sort(I first, I last) {
  <span class="kw">for</span> (<span class="kw">auto</span>&amp;&amp; iter = next(first); iter != last; ++iter) {
    insert_last_after(first, next(iter),
      [iter] (<span class="kw">auto</span>&amp;&amp; value) { <span class="kw">return</span> value &lt;= *iter; });
  }
}</code></pre></div>
<h3 id="in-place-merge-sort">In-Place Merge Sort</h3>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>``One thing every sorcerer will tell you is if you have the name of a spirit, you have power over it.’’ —Gerald Jay Sussman<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Obviously I won’t be using <code>std::sort()</code>!<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Introduction to Algorithms, by Cormen et al.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>Before C++11, <code>rotate()</code> used to return <code>void</code>.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p><code>rotate()</code> can be implemented in <em>O(n)</em> time using three <code>reverse()</code>s. In fact, this implementation results in a number of swaps almost exactly equals to <em>n</em>.<a href="#fnref5">↩</a></p></li>
</ol>
</div>
  </p>

  <p class="tag-list">
  <strong>Tags:</strong> <a href="./tags/C%2B%2B/">C++</a>, <a href="./tags/STL/">STL</a>, <a href="./tags/Algorithms/">Algorithms</a>.
  <p></p>
</section>
<header class="post-header">
  
    <h2 id="post-link"><a href="./posts/object-inspection-in-gdb/">Object Inspection in GDB</a></h2>
  

  <p class="post-info">
    May 24, 2014
  </p>
</header>

<section class="post-body">
  <p>
  <p>One of the primary needs of a developer, while debugging any code, is to be able to inspect, not only primitive values, but also compound values (like objects). The problem is that objects are usually littered with lots of irrelevant information that obscure the essence of what the developer might be interested in. It becomes even worse when the interesting pieces of an object are in dynamic memory, in which case all you get to see are dumb pointers. Consider the following code:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="ot">#include &lt;vector&gt;</span>

<span class="dt">int</span> main() {
  std::vector&lt;<span class="dt">int</span>&gt; v;
  v.push_back(<span class="dv">1</span>);
  v.push_back(<span class="dv">2</span>);
  v.push_back(<span class="dv">3</span>);
  v.push_back(<span class="dv">4</span>);
  v.push_back(<span class="dv">5</span>);

  <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre></div>
<p>Here’s the output from GDB when attempting to print <code>v</code> just before returning<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">(gdb) print v
<span class="er">$</span><span class="dv">1</span> = {
  &lt;std::__1::__vector_base&lt;<span class="dt">int</span>, std::__1::allocator&lt;<span class="dt">int</span>&gt; &gt;&gt; = {
    &lt;std::__1::__vector_base_common&lt;<span class="kw">true</span>&gt;&gt; = {&lt;No data fields&gt;},
    members of std::__1::__vector_base&lt;<span class="dt">int</span>, std::__1::allocator&lt;<span class="dt">int</span>&gt; &gt;:
    __begin_ = <span class="bn">0x100103a70</span>,
    __end_ = <span class="bn">0x100103a84</span>,
    __end_cap_ = {
      &lt;std::__1::__libcpp_compressed_pair_imp&lt;<span class="dt">int</span>*, std::__1::allocator&lt;<span class="dt">int</span>&gt;, <span class="dv">2</span>&gt;&gt; = {
        &lt;std::__1::allocator&lt;<span class="dt">int</span>&gt;&gt; = {&lt;No data fields&gt;},
        members of std::__1::__libcpp_compressed_pair_imp&lt;<span class="dt">int</span>*, std::__1::allocator&lt;<span class="dt">int</span>&gt;, <span class="dv">2</span>&gt;:
        __first_ = <span class="bn">0x100103a90</span>
      }, &lt;No data fields&gt;}
  }, &lt;No data fields&gt;}</code></pre></div>
<p>It’s obvious that this output is essentially useless. It’s basically a bunch of memory addresses and obscure data types with absolutely no reference to what the developer is looking for, the entries of the vector!</p>
<p>GDB solves this problem (and others) by providing a full-fledged <a href="https://sourceware.org/gdb/onlinedocs/gdb/Python-API.html">Python API</a><a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> for interacting with the inferior<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>. This API can be used for inspecting all sorts of information about the inferior, including static and dynamic value types, symbols and symbol tables, stack frames and even allows you to evaluate expressions in the inferior language. Moreover, this API has facilities for controlling GDB itself, by defining and executing GDB commands, creating breakpoints and watchpoints, inspecting breakpoint attributes and much more.</p>
<p>What we care about here is GDB’s <a href="https://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing-API.html">Pretty Printing API</a>. This API enables the creation of custom pretty printers for values of user-defined types. The goal is to allow the developer to use the plain old GDB <code>print</code> command on values of user-defined types and still get to see only the relevant pieces of the printed value.</p>
<p>GDB’s Python API represents values from the inferior using the <code>gdb.Value</code> class, and represents types using the <code>gdb.Type</code> class. Documentation for these classes can be found <a href="https://sourceware.org/gdb/onlinedocs/gdb/Values-From-Inferior.html">here</a> and <a href="https://sourceware.org/gdb/onlinedocs/gdb/Types-In-Python.html">here</a>. The most important aspect about <code>gdb.Value</code> is that for object values, you can access object members using Python’s dictionary syntax e.g. <code>obj.mem</code> becomes <code>obj[&quot;mem&quot;]</code>.</p>
<p>To create a pretty printer for a certain type, you need to create a <em>printer</em> class that has at least one method, <code>to_string()</code>, which converts that type to string for printing. If you know that your type represents some sort of an array, list or table, you may also need to add a <code>children()</code> method to your class. This later method must return an object conforming to the Python <a href="https://docs.python.org/2/library/stdtypes.html#iterator-types">iterator protocol</a>, where every item returned by that iterator must be a pair of child name and value as you wish to observe them in the output. If the child type also has a printer, GDB will automatically invoke it to print all the children.</p>
<p>Let’s go ahead and write a pretty printer for <code>libc++</code>’s <code>std::vector</code><a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> gdb
<span class="im">import</span> re

<span class="kw">class</span> VectorPrinter(<span class="bu">object</span>):
  <span class="co">&quot;&quot;&quot;Prints an std::vector object.&quot;&quot;&quot;</span>
  <span class="kw">class</span> _iterator(<span class="bu">object</span>):
    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, value):
      <span class="va">self</span>.counter <span class="op">=</span> <span class="dv">0</span>
      <span class="va">self</span>.begin <span class="op">=</span> value[<span class="st">&quot;__begin_&quot;</span>]
      <span class="va">self</span>.end <span class="op">=</span> value[<span class="st">&quot;__end_&quot;</span>]

    <span class="kw">def</span> <span class="fu">__iter__</span>(<span class="va">self</span>):
      <span class="cf">return</span> <span class="va">self</span>

    <span class="kw">def</span> <span class="bu">next</span>(<span class="va">self</span>):
      <span class="cf">if</span> <span class="va">self</span>.begin <span class="op">==</span> <span class="va">self</span>.end:
        <span class="cf">raise</span> <span class="pp">StopIteration</span>

      ret <span class="op">=</span> (<span class="st">&quot;[</span><span class="sc">%d</span><span class="st">]&quot;</span> <span class="op">%</span> <span class="va">self</span>.counter, <span class="va">self</span>.begin.dereference())
      <span class="va">self</span>.begin <span class="op">+=</span> <span class="dv">1</span>
      <span class="va">self</span>.counter <span class="op">+=</span> <span class="dv">1</span>
      <span class="cf">return</span> ret

  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, value):
    <span class="va">self</span>.value <span class="op">=</span> value

  <span class="kw">def</span> to_string(<span class="va">self</span>):
    <span class="cf">return</span> <span class="st">&quot;vector&quot;</span>

  <span class="kw">def</span> children(<span class="va">self</span>):
    <span class="cf">return</span> <span class="va">self</span>._iterator(<span class="va">self</span>.value)</code></pre></div>
<p>Note that we can access private members of <code>std::vector</code> (<code>__begin_</code> and <code>__end_</code>). This is because access rights are inactive in the debugger. You may wonder why we bother accessing data members of <code>std::vector</code> if we can just call <code>v.begin()</code> and <code>v.end()</code>. There are two reasons for this:</p>
<ol style="list-style-type: decimal">
<li><p>In many cases we just can’t, because these member functions are usually small enough that the compiler usually decides to inline them. If you try to print the <code>begin()</code> iterator for instance, you may get an error that looks something like this: <code>Cannot evaluate function -- may be inlined</code>.</p></li>
<li><p>If the type you’re trying to print is an <em>incomplete type</em> e.g. if it’s not part of the process binary (it might be dynamically linked for instance), then you won’t even have access to any of the object’s members, in which case, the only way to refer to the object’s data members is by using pointer arithmetic.</p></li>
</ol>
<p>Notice also that <code>to_string()</code> doesn’t actually do anything here. It just returns the string <code>&quot;vector&quot;</code>. That’s because when you create a <code>children()</code> method, the output of <code>to_string()</code> represents the name of the printed list. It gets prepended (along with a succeeding <code>=</code> sign) to the output list resulting from the call to <code>children()</code>.</p>
<p><code>children()</code> returns an object of the <code>VectorPrinter._iterator</code> class. This class conforms to the Python iterator protocol by implementing a <code>next()</code> method, which returns the next value of the vector (actually a name/value pair) and raises a <code>StopIteration</code> exception when no more entries are found in the vector. The <code>dereference()</code> method of <code>gdb.Value</code> returns the value pointed to by a pointer when the <code>gdb.Value</code> represents a pointer and raises an exception otherwise.</p>
<p>To activate the pretty printer, we need to define a <em>lookup</em> function for our type and a registration function for our printer(s):</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> vec_lookup_function(val):
  lookup_tag <span class="op">=</span> val.<span class="bu">type</span>.tag
  <span class="cf">if</span> lookup_tag <span class="op">==</span> <span class="va">None</span>:
    <span class="cf">return</span> <span class="va">None</span>

  regex <span class="op">=</span> re.<span class="bu">compile</span>(<span class="st">&quot;^.*vector_base&lt;.*,.*&gt;$&quot;</span>)
  <span class="cf">if</span> regex.match(lookup_tag):
    <span class="cf">return</span> VectorPrinter(val)

  <span class="cf">return</span> <span class="va">None</span>

<span class="kw">def</span> register_libcxx_printers(objfile):
  objfile.pretty_printers.append(vec_lookup_function)</code></pre></div>
<p>The lookup function is called by GDB for every value it attempts to print. If the return value is not <code>None</code>, GDB uses it as a printer object for that value. In this case the <code>std::vector</code> lookup function inspects the value type tag. That’s the word that comes after a <code>class</code>, <code>struct</code> or <code>union</code> keywords in C++ i.e. it’s the class name. Since in <code>libc++</code>, <code>std::vector</code> unfolds to a type that has the word <code>vector_base</code> in it, it’s possible to recognize that type using a regular expression as shown above.</p>
<p>Finally, we need to make sure GDB loads this file at startup. To do so, we need to make sure the printer module is in the <code>PYTHONPATH</code> and call the printer registration function in <code>~/.gdbinit</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">python
<span class="im">from</span> libcxx.printers <span class="im">import</span> register_libcxx_printers
register_libcxx_printers(gdb)
end</code></pre></div>
<p>Here’s the output from GDB using this pretty printer:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">(gdb) print v
<span class="er">$</span><span class="dv">1</span> = {
  &lt;std::__1::__vector_base&lt;<span class="dt">int</span>, std::__1::allocator&lt;<span class="dt">int</span>&gt; &gt;&gt; = vector = {
    [<span class="dv">0</span>] = <span class="dv">1</span>,
    [<span class="dv">1</span>] = <span class="dv">2</span>,
    [<span class="dv">2</span>] = <span class="dv">3</span>,
    [<span class="dv">3</span>] = <span class="dv">4</span>,
    [<span class="dv">4</span>] = <span class="dv">5</span>
  }, &lt;No data fields&gt;}</code></pre></div>
<p>At any point, if you need to print the <em>raw</em> version of a vector, you can use the <code>/r</code> switch:</p>
<div class="sourceCode"><pre class="sourceCode cpp"><code class="sourceCode cpp">(gdb) print /r v
<span class="er">$</span><span class="dv">2</span> = {
  &lt;std::__1::__vector_base&lt;<span class="dt">int</span>, std::__1::allocator&lt;<span class="dt">int</span>&gt; &gt;&gt; = {
    &lt;std::__1::__vector_base_common&lt;<span class="kw">true</span>&gt;&gt; = {&lt;No data fields&gt;},
    members of std::__1::__vector_base&lt;<span class="dt">int</span>, std::__1::allocator&lt;<span class="dt">int</span>&gt; &gt;:
    __begin_ = <span class="bn">0x100103a70</span>,
    __end_ = <span class="bn">0x100103a84</span>,
    __end_cap_ = {
      &lt;std::__1::__libcpp_compressed_pair_imp&lt;<span class="dt">int</span>*, std::__1::allocator&lt;<span class="dt">int</span>&gt;, <span class="dv">2</span>&gt;&gt; = {
        &lt;std::__1::allocator&lt;<span class="dt">int</span>&gt;&gt; = {&lt;No data fields&gt;},
        members of std::__1::__libcpp_compressed_pair_imp&lt;<span class="dt">int</span>*, std::__1::allocator&lt;<span class="dt">int</span>&gt;, <span class="dv">2</span>&gt;:
        __first_ = <span class="bn">0x100103a90</span>
      }, &lt;No data fields&gt;}
  }, &lt;No data fields&gt;}</code></pre></div>
<p>There are different variations for how to create printer classes and lookup and registration function, but I wanted to keep things simple in this tutorial. For more information, check out the <a href="https://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing-API.html">Pretty Printing API documentation</a>.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>I’m using Clang’s <code>libc++</code> standard library here. If you use GCC’s <code>libstdc++</code>, your mileage may vary.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>GDB has to be configured with <code>--with-python</code> for this to work.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>The process under debugging.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>For <code>libstdc++</code>, you can use any of the tools mentioned <a href="https://sourceware.org/gdb/wiki/STLSupport">here</a>. I should also mention that <a href="http://lldb.llvm.org">LLDB</a> already prints <code>libc++</code>’s STL containers pretty decently. Check it out before rolling out your own GDB printers.<a href="#fnref4">↩</a></p></li>
</ol>
</div>
  </p>

  <p class="tag-list">
  <strong>Tags:</strong> <a href="./tags/Debugging/">Debugging</a>, <a href="./tags/GDB/">GDB</a>.
  <p></p>
</section>

</section>

<section>
  For older posts, head over to the <a href="./blog/1">blog</a> page. To browse all
  posts and post tags, check out the <a href="./archive">archive</a>.
</section>



      <aside id="fractal">
        <img src="./img/fractal.png" width="150" height="80">
      </aside>

      <!--[if gt IE 7]><!-->
      <aside id="socialbar">
        <section>
          <a href="http://google.com/+HaithamGad" target="_blank" title="Google+">
            <i class="fa fa-google-plus-box"></i></a>
          <a href="https://twitter.com/hgad" target="_blank" title="Twitter">
            <i class="fa fa-twitter-box"></i></a>
          <a href="http://www.linkedin.com/in/haithamgad" target="_blank" title="LinkedIn"><i class="fa fa-linkedin-box"></i></a>
          <a href="https://github.com/hgad" target="_blank" title="GitHub">
            <i class="fa fa-github-box"></i></a>
          <a href="./feed.xml" title="Feed">
            <i class="fa fa-rss-box"></i></a>
        </section>
      </aside>
      <!--<![endif]-->
    </article>

    <footer>
      <table>
        <tr>
          <td id="license">
            &copy; 2016 Haitham Gad
          </td>
          <td id="hakyll">
            Generated by
            <a target="_blank" href="http://jaspervdj.be/hakyll">Hakyll</a>
          </td>
        </tr>
      </table>
    </footer>

    <script src="./js/vendor/jquery-1.10.2.min.js">
    </script>

    <script src="./js/plugins.js"></script>
    <script src="./js/main.js"></script>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-45318006-1', 'hgad.net');
      ga('send', 'pageview');

    </script>
  </body>
</html>

